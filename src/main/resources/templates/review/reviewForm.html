<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 후기 등록</title>
    <!-- 여기서 원하는 CSS 파일을 추가할 수 있습니다 -->
    <style>
        .error {
            color: red;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <h2>상품 후기 등록</h2>

    <!-- 리뷰 등록 폼 시작 -->
    <form th:action="@{/review}" method="post" th:object="${reviewFormDto}" enctype="multipart/form-data">

        <!-- 등록자명 -->
        <div class="form-group mb-3">
            <label for="memberName">등록자명</label>
            <input type="text" th:field="*{memberName}" class="form-control" id="memberName" placeholder="등록자명을 입력하세요">
            <p th:if="${#fields.hasErrors('memberName')}" th:errors="*{memberName}" class="error text-danger">Incorrect data</p>
        </div>

        <!-- 후기 내용 -->
        <div class="form-group mb-3">
            <label for="reviewDetail">후기 내용</label>
            <textarea th:field="*{reviewDetail}" class="form-control" id="reviewDetail" rows="4" placeholder="후기 내용을 입력하세요"></textarea>
            <p th:if="${#fields.hasErrors('reviewDetail')}" th:errors="*{reviewDetail}" class="error text-danger">Incorrect data</p>
        </div>

        <!-- 이미지 업로드 -->
        <div class="form-group mb-3">
            <label for="reviewImages">이미지 업로드 (선택)</label>
            <input type="file" th:field="*{reviewImgDtoList[0].imgUrl}" class="form-control" id="reviewImages" name="reviewImgDtoList[0].imgUrl">
            <input type="file" th:field="*{reviewImgDtoList[1].imgUrl}" class="form-control mt-2" id="reviewImages" name="reviewImgDtoList[1].imgUrl">
            <input type="file" th:field="*{reviewImgDtoList[2].imgUrl}" class="form-control mt-2" id="reviewImages" name="reviewImgDtoList[2].imgUrl">
            <p th:if="${#fields.hasErrors('reviewImgDtoList')}" th:errors="*{reviewImgDtoList}" class="error text-danger">Incorrect data</p>
        </div>

        <!-- 제출 버튼 -->
        <div class="text-center mt-5">
            <button type="submit" class="btn btn-success">등록하기</button>
        </div>

        <!-- CSRF 보호 -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

    </form>
</div>

<!-- 여기에 필요한 JS 파일을 추가할 수 있습니다 -->
<script>
    // 파일 필드 동적으로 추가하는 기능 (옵션)
    let imageCount = 3;
    function addImageField() {
        if (imageCount < 5) { // 최대 5개의 이미지를 허용
            let newInput = document.createElement("input");
            newInput.type = "file";
            newInput.name = "reviewImgDtoList[" + imageCount + "].imgUrl";
            newInput.classList.add("form-control", "mt-2");
            document.getElementById("reviewImages").parentNode.appendChild(newInput);
            imageCount++;
        }
    }
</script>

</body>
</html>
